{"version":3,"file":"router.cjs.js","sources":["../../../../src/schema/openapi/generated/router.ts"],"sourcesContent":["/*\n * Copyright 2025 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// ******************************************************************\n// * THIS IS AN AUTOGENERATED FILE. DO NOT EDIT THIS FILE DIRECTLY. *\n// ******************************************************************\nimport { createValidatedOpenApiRouterFromGeneratedEndpointMap } from '@backstage/backend-openapi-utils';\nimport { EndpointMap } from './apis';\n\nexport const spec = {\n  openapi: '3.0.3',\n  info: {\n    title: 'events',\n    version: '1',\n    description: 'The Backstage backend plugin that powers the events system.',\n    license: {\n      name: 'Apache-2.0',\n      url: 'http://www.apache.org/licenses/LICENSE-2.0.html',\n    },\n    contact: {},\n  },\n  servers: [\n    {\n      url: '/',\n    },\n  ],\n  components: {\n    examples: {},\n    headers: {},\n    parameters: {\n      subscriptionId: {\n        name: 'subscriptionId',\n        in: 'path',\n        required: true,\n        allowReserved: true,\n        schema: {\n          type: 'string',\n        },\n      },\n    },\n    requestBodies: {},\n    responses: {\n      ErrorResponse: {\n        description: 'An error response from the backend.',\n        content: {\n          'application/json; charset=utf-8': {\n            schema: {\n              $ref: '#/components/schemas/Error',\n            },\n          },\n        },\n      },\n    },\n    schemas: {\n      Event: {\n        type: 'object',\n        required: ['topic', 'payload'],\n        properties: {\n          topic: {\n            type: 'string',\n            description: 'The topic that the event is published on',\n          },\n          payload: {\n            description: 'The event payload',\n          },\n        },\n      },\n      Error: {\n        type: 'object',\n        properties: {\n          error: {\n            type: 'object',\n            properties: {\n              name: {\n                type: 'string',\n              },\n              message: {\n                type: 'string',\n              },\n            },\n            required: ['name', 'message'],\n          },\n          request: {\n            type: 'object',\n            properties: {\n              method: {\n                type: 'string',\n              },\n              url: {\n                type: 'string',\n              },\n            },\n            required: ['method', 'url'],\n          },\n          response: {\n            type: 'object',\n            properties: {\n              statusCode: {\n                type: 'number',\n              },\n            },\n            required: ['statusCode'],\n          },\n        },\n        required: ['error', 'request', 'response'],\n      },\n    },\n    securitySchemes: {\n      JWT: {\n        type: 'http',\n        scheme: 'bearer',\n        bearerFormat: 'JWT',\n      },\n    },\n  },\n  paths: {\n    '/bus/v1/events': {\n      post: {\n        operationId: 'PostEvent',\n        description: 'Publish a new event',\n        responses: {\n          '201': {\n            description: 'The event was published successfully',\n          },\n          '204': {\n            description:\n              'The event did not need to be published as all subscribers have already been notified',\n          },\n          default: {\n            $ref: '#/components/responses/ErrorResponse',\n          },\n        },\n        security: [\n          {},\n          {\n            JWT: [],\n          },\n        ],\n        requestBody: {\n          required: true,\n          content: {\n            'application/json': {\n              schema: {\n                type: 'object',\n                required: ['event'],\n                properties: {\n                  event: {\n                    $ref: '#/components/schemas/Event',\n                  },\n                  notifiedSubscribers: {\n                    type: 'array',\n                    description:\n                      'The IDs of subscriptions that have already received this event',\n                    items: {\n                      type: 'string',\n                    },\n                  },\n                },\n              },\n              examples: {\n                'Publishing a simple Event': {\n                  value: {\n                    event: {\n                      topic: 'test-topic',\n                      payload: {\n                        myData: 'foo',\n                      },\n                    },\n                  },\n                },\n              },\n            },\n          },\n        },\n      },\n    },\n    '/bus/v1/subscriptions/{subscriptionId}': {\n      put: {\n        operationId: 'PutSubscription',\n        description:\n          'Ensures that the subscription exists with the provided configuration',\n        responses: {\n          '201': {\n            description: 'The subscription exists or was created successfully',\n          },\n          default: {\n            $ref: '#/components/responses/ErrorResponse',\n          },\n        },\n        security: [\n          {},\n          {\n            JWT: [],\n          },\n        ],\n        parameters: [\n          {\n            $ref: '#/components/parameters/subscriptionId',\n          },\n        ],\n        requestBody: {\n          required: true,\n          content: {\n            'application/json': {\n              schema: {\n                type: 'object',\n                required: ['topics'],\n                properties: {\n                  topics: {\n                    type: 'array',\n                    description: 'The topics to subscribe to',\n                    items: {\n                      type: 'string',\n                    },\n                  },\n                },\n              },\n              examples: {\n                'Subscribing to a single topic': {\n                  value: {\n                    topics: ['test-topic'],\n                  },\n                },\n              },\n            },\n          },\n        },\n      },\n    },\n    '/bus/v1/subscriptions/{subscriptionId}/events': {\n      get: {\n        operationId: 'GetSubscriptionEvents',\n        description: 'Get new events for the provided subscription',\n        responses: {\n          '200': {\n            description: 'New events',\n            content: {\n              'application/json': {\n                schema: {\n                  type: 'object',\n                  required: ['events'],\n                  properties: {\n                    events: {\n                      type: 'array',\n                      items: {\n                        $ref: '#/components/schemas/Event',\n                      },\n                    },\n                  },\n                },\n              },\n            },\n          },\n          '202': {\n            description:\n              'No new events are available. Response will block until the client should try again.',\n          },\n          default: {\n            $ref: '#/components/responses/ErrorResponse',\n          },\n        },\n        security: [\n          {},\n          {\n            JWT: [],\n          },\n        ],\n        parameters: [\n          {\n            $ref: '#/components/parameters/subscriptionId',\n          },\n        ],\n      },\n    },\n  },\n} as const;\nexport const createOpenApiRouter = async (\n  options?: Parameters<\n    typeof createValidatedOpenApiRouterFromGeneratedEndpointMap\n  >['1'],\n) =>\n  createValidatedOpenApiRouterFromGeneratedEndpointMap<EndpointMap>(\n    spec,\n    options,\n  );\n"],"names":["createValidatedOpenApiRouterFromGeneratedEndpointMap"],"mappings":"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"}